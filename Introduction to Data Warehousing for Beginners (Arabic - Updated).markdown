# مقدمة في **Data Warehousing** للمبتدئين (محدثة)

مرحبًا يا شباب! النهاردة هنتعمق أكتر في موضوع **Data Warehousing**، وهنضيف تفاصيل جديدة عشان نكمل الصورة الكبيرة للمبتدئين في **Data Analysis**. المحاضرة دي هتكون بسيطة ومنظمة، وهنستخدم مصطلحات إنجليزية زي **Data Warehouse**، **OLTP**، **OLAP**، و **ETL** عشان تتعودوا عليها. هنشرح إزاي الـ **Data Warehouse** بيشتغل، ليه مهم، وإزاي بيفرق عن الـ **Operational Database**، مع أمثلة عملية من الإنترنت.

---

## 1. إيه هو الـ **Data Warehouse**؟
الـ **Data Warehouse** زي مكتبة ضخمة بتجمع بيانات الشركة من مصادر مختلفة (زي المبيعات، بيانات العملاء، أو تحليلات المواقع) عشان نقدر نعمل **Analysis** ونطلع تقارير تساعد في اتخاذ القرارات. على عكس الـ **Operational Database** اللي بتدير العمليات اليومية زي تسجيل المبيعات، الـ **Data Warehouse** مصمم لتحليل البيانات التاريخية (**Historical Data**).

- **Operational Database**: زي الكاشير في سوبرماركت. لما تشتري عصير، النظام بيسجل فورًا إنك اشتريته الساعة 3 عصرًا وبيحدث المخزون. دي بتتعامل مع **Transactions** يومية.
- **Data Warehouse**: زي لو مدير السوبرماركت عايز يعرف أي نوع عصير بيتباع أكتر في الصيف على مدى 5 سنين. بيجمع بيانات من مصادر كتير ويحللها.

**مثال عملي**: متجر أونلاين لبيع أحذية. الـ **Operational Database** بتسجل كل طلبية، زي "محمد اشترى جزمة رياضية الساعة 4 عصرًا". الـ **Data Warehouse** بيخزن بيانات المبيعات لسنين ويخليك تحلل، مثلاً: "الأحذية الرياضية بتتباع بنسبة 40% أكتر في الشتاء".

**ليه بنستخدم الـ Data Warehouse؟**
- يخزن **Historical Data** (بيانات قديمة لسنين).
- يجمع بيانات من مصادر مختلفة (**Heterogeneous Sources**) زي قواعد البيانات، ملفات Excel، أو تحليلات السوشيال ميديا.
- يساعد على **Complex Analysis** لاتخاذ قرارات زي توقع المبيعات أو تحديد أفضل العملاء.

*مصدر*: [What is a Data Warehouse?](https://www.oracle.com/database/what-is-a-data-warehouse/)

---

## 2. خصائص الـ **Data Warehouse**
الـ **Data Warehouse** ليه 4 خصائص أساسية حسب تعريف **W. H. Inmon**:

1. **Subject-Oriented**: مركز على مواضيع معينة زي العملاء، المنتجات، أو المبيعات. يعني بنركز على تحليل مواضيع معينة مش العمليات اليومية.
   - **مثال**: لو عندك شركة شحن، الـ **Data Warehouse** هيركز على تحليل بيانات العملاء (مين بيشحن أكتر؟) بدل ما يسجل كل عملية شحن.
2. **Integrated**: بيجمع بيانات من مصادر مختلفة ويوحد شكلها. مثلاً، لو مصدر بيكتب "جنيه مصري" ومصدر تاني بيكتب "EGP"، الـ **Data Warehouse** بيوحد الكل على "EGP".
   - **مثال**: شركة فنادق بتجمع بيانات من قاعدة بيانات الحجوزات ومن موقع الحجز الأونلاين، وبيتم تنظيف البيانات عشان تكون متسقة.
3. **Time-Variant**: بيحتوي على بيانات تاريخية (من 5-10 سنين مثلاً)، مش زي الـ **Operational Database** اللي بتركز على البيانات الحالية.
   - **مثال**: الـ **Data Warehouse** بيخليك تحلل مبيعات السنين اللي فاتت، بينما الـ **Operational Database** بتسجل مبيعات اليوم بس.
4. **Nonvolatile**: البيانات في الـ **Data Warehouse** مابتتغيرش كتير. يعني مافيش تحديثات يومية زي الـ **Operational Database**. بيتم تحميل البيانات مرة وبعدين تستخدم للتحليل.
   - **مثال**: لو بيانات مبيعات 2023 اتحملت في الـ **Data Warehouse**، مابتتغيرش، بس بتتحلل عشان نعرف اتجاهات المبيعات.

*مصدر*: [Data Warehouse Concepts](https://www.ibm.com/docs/en/watson-knowledge-catalog?topic=overview-data-warehouse-concepts)

---

## 3. إزاي الـ **Data Warehouse** بيشتغل؟
الـ **Data Warehouse** بيجمع البيانات من مصادر مختلفة، بيعالجها، وبيخزنها بطريقة تسهل التحليل. خلينا نشرح الخطوات:

1. **Data Sources (مصادر البيانات)**:
   البيانات بتيجي من أماكن زي:
   - **Operational Databases** (زي قاعدة بيانات المبيعات).
   - ملفات (زي ملفات Excel أو CSV).
   - مصادر خارجية (زي تحليلات جوجل أو بيانات السوشيال ميديا).

   **مثال**: شركة بيع أونلاين بتجمع بيانات من موقعها، تطبيق الموبايل، وتقارير السوشيال ميديا.

2. **ETL Process (Extract, Transform, Load)**:
   دي العملية اللي بنحضر بيها البيانات:
   - **Extract**: نجيب البيانات من المصادر.
   - **Transform**: ننضف البيانات ونوحد شكلها (مثلاً، لو في مصدر بيكتب "Male" ومصدر تاني بيكتب "M"، بنوحد الكل على "M").
   - **Load**: نحط البيانات المنضفة في الـ **Data Warehouse**، مع عمل **Indexes** و **Partitions** عشان التحليل يبقى أسرع.

   **مثال**: سوبرماركت بيجمع بيانات المبيعات من 100 فرع. الـ **ETL** بيجمع البيانات، بيصلح أخطاء زي أسماء منتجات مكتوبة بشكل مختلف، وبيخزنها في الـ **Data Warehouse**.

3. **Storage in Data Warehouse**:
   البيانات بتتخزن في **Tables**:
   - **Fact Tables**: بتخزن الأرقام اللي بنحللها، زي عدد المنتجات اللي اتباعت أو إجمالي الإيرادات.
   - **Dimension Tables**: بتخزن التفاصيل الوصفية، زي الوقت (تاريخ البيع)، المكان (المدينة)، أو المنتج (اسم، لون).

   **مثال**: في **Data Warehouse** لمكتبة، الـ **Fact Table** بتسجل "100 كتاب اتباعوا يوم 1 يناير 2025"، والـ **Dimension Table** بتوصف الكتاب (العنوان، المؤلف، النوع).

4. **Analysis (التحليل)**:
   بنستخدم أدوات زي **SQL** أو **BI Tools** (مثل Power BI) عشان نعمل **Queries** ونطلع تقارير. مثلاً، مدير المبيعات ممكن يسأل: "إيه المنتجات اللي اتباعت أكتر في القاهرة سنة 2024؟"

*مصدر*: [ETL Process in Data Warehousing](https://www.ibm.com/docs/en/watson-knowledge-catalog?topic=overview-etl-process)

---

## 4. **OLTP** مقابل **OLAP**
الـ **Data Warehouse** بيستخدم لـ **OLAP (Online Analytical Processing)**، بينما الـ **Operational Database** بتستخدم لـ **OLTP (Online Transaction Processing)**. خلينا نقارن:

| **النقطة**                | **OLTP**                                             | **OLAP**                                             |
|---------------------------|-----------------------------------------------------|-----------------------------------------------------|
| **الغرض**                | إدارة العمليات اليومية (**Transactions**)          | تحليل البيانات التاريخية (**Historical Analysis**) |
| **المستخدمين**           | موظفين عاديين (زي الكاشير أو موظف خدمة العملاء)   | محللين أو مديرين (زي مدير التسويق)                 |
| **نوع البيانات**         | بيانات حالية، مفصلة، معزولة                        | بيانات تاريخية، موجزة، مدمجة                       |
| **التصميم**              | موجه للتطبيقات (**Application-Oriented**)           | موجه للمواضيع (**Subject-Oriented**)               |
| **الاستخدام**            | عمليات متكررة (زي تسجيل مبيعة)                    | تحليلات غير متكررة (**Ad-Hoc Queries**)            |
| **حجم السجلات**          | عشرات السجلات                                      | ملايين السجلات                                     |
| **حجم القاعدة**          | صغير (100 ميجا - جيجا)                            | كبير (100 جيجا - تيرا)                            |
| **الأداء**               | سرعة في التحديثات (**Insert, Update, Delete**)      | سرعة في التحليلات (**Complex Queries**)            |

**مثال**: لو عندك متجر إلكتروني، الـ **OLTP** بيسجل كل طلبية جديدة (زي "عميل اشترى تيشيرت"). الـ **OLAP** بيحلل بيانات المبيعات لسنين ويقولك: "التيشيرتات الرياضية بتتباع أكتر في الصيف".

*مصدر*: [OLTP vs. OLAP](https://www.datacamp.com/blog/oltp-vs-olap)

---

## 5. ليه الـ **Data Warehouse** منفصل عن الـ **Operational Database**؟
- **أداء عالي**: الـ **Operational Database** مصممة لسرعة الـ **Transactions**، بينما الـ **Data Warehouse** مصمم لتحليلات معقدة (**Complex Queries**).
- **بيانات مختلفة**: الـ **Data Warehouse** بيحتاج بيانات تاريخية مش موجودة عادةً في الـ **Operational Database**.
- **توحيد البيانات**: الـ **Data Warehouse** بيدمج بيانات من مصادر مختلفة وينضفها عشان تكون متسقة.
- **جودة البيانات**: المصادر المختلفة بتكون فيها تناقضات (زي اختلاف الأسماء أو الصيغ)، والـ **Data Warehouse** بيحل المشكلة دي.

**مثال**: لو عندك شركة توصيل، الـ **Operational Database** ممكن تسجل طلبات اليوم، بس الـ **Data Warehouse** هيحلل بيانات التوصيل لسنين عشان يقولك أي منطقة فيها طلبات أكتر.

---

## 6. أنواع الـ **Data Warehouse**
فيه 3 أنواع رئيسية للـ **Data Warehouse**:
1. **Enterprise Warehouse**: بيجمع كل البيانات عن الشركة كلها (مثل المبيعات، التسويق، المخزون).
   - **مثال**: شركة زي أمازون بتستخدم **Enterprise Warehouse** عشان تحلل كل بياناتها من كل الأقسام.
2. **Data Mart**: جزء صغير من الـ **Data Warehouse** مركز على قسم معين، زي قسم التسويق.
   - **مثال**: **Data Mart** لقسم التسويق بيحلل بيانات الحملات الإعلانية بس.
3. **Virtual Warehouse**: عبارة عن **Views** مبنية على الـ **Operational Database**، بس مش بتخزن بيانات فعلية، بتعتمد على البيانات الموجودة.
   - **مثال**: لو عايز تحلل بيانات مبيعات اليوم من غير ما تخزنها في **Data Warehouse**، تستخدم **Virtual Warehouse**.

*مصدر*: [Data Warehouse Models](https://www.guru99.com/data-warehouse-architecture.html)

---

## 7. تصميم الـ **Data Warehouse**
الـ **Data Warehouse** بيترتب بطريقة تسهل التحليل، وأشهر طريقة هي **Star Schema**:
- **Fact Table**: في النص، بتحتوي على الأرقام اللي بنحللها (زي إجمالي المبيعات).
- **Dimension Tables**: متوصلة بالـ **Fact Table**، بتحتوي على التفاصيل زي الوقت (سنة، شهر)، المكان (مدينة)، أو المنتج (اسم، نوع).

**مثال Star Schema**:
تخيل **Fact Table** فيها مبيعات متجر (عدد الأحذية اللي اتباعت، إجمالي الفلوس). متوصلة بـ **Dimension Tables** زي:
- **Time Dimension**: تواريخ المبيعات (يوم، شهر، سنة).
- **Product Dimension**: تفاصيل الأحذية (لون، نوع).
- **Location Dimension**: المدن أو الدول.

**Snowflake Schema**: زي الـ **Star Schema** بس أكتر تعقيدًا، لأن الـ **Dimension Tables** بتتقسم لجداول أصغر عشان تقلل التكرار.
- **مثال**: بدل ما يكون عندك جدول واحد لـ **Location** فيه المدينة والدولة، ممكن يكون عندك جدول للمدن وجدول تاني للدول.

**Fact Constellation (Galaxy Schema)**: لما يكون عندك أكتر من **Fact Table** بتشارك نفس الـ **Dimension Tables**.
- **مثال**: **Fact Table** للمبيعات و**Fact Table** تانية للتكاليف، وكلاهما بيستخدموا نفس جدول **Time Dimension**.

*مصدر*: [Star vs. Snowflake Schema](https://www.dataversity.net/star-schema-vs-snowflake-schema/)

---

## 8. **Data Cube** و **OLAP Operations**
الـ **-press**Data Cube** هو طريقة عرض البيانات في شكل مكعب متعدد الأبعاد (**Multidimensional**)، كل بعد بيمثل حاجة زي المنتج، الوقت، أو المكان.

**أمثلة على OLAP Operations**:
1. **Roll-up (Drill-up)**: تلخيص البيانات (مثلاً، من مبيعات يومية لمبيعات شهرية).
   - **مثال**: بدل ما تشوف مبيعات كل يوم، تشوف إجمالي مبيعات الشهر.
2. **Drill-down**: العكس، يعني النزول لتفاصيل أدق (مثلاً، من مبيعات الشهر لمبيعات اليوم).
   - **مثال**: تحليل مبيعات يناير لكل يوم في الشهر.
3. **Slice**: اختيار جزء معين من البيانات (مثلاً، مبيعات منتج معين في كل المناطق).
   - **مثال**: مبيعات الأحذية الرياضية فقط.
4. **Dice**: اختيار مجموعة فرعية من البيانات (مثلاً، مبيعات منتج معين في منطقة معينة في وقت معين).
   - **مثال**: مبيعات الأحذية الرياضية في القاهرة في يناير 2025.
5. **Pivot**: تغيير طريقة عرض البيانات (مثلاً، تبديل الأعمدة والصفوف).
   - **مثال**: بدل ما تشوف المبيعات حسب المنتج في الأعمدة، تشوفها حسب المنطقة.

*مصدر*: [OLAP Operations](https://www.tutorialspoint.com/dw/dw_olap.htm)

---

## 9. **Bitmap Index**
الـ **Bitmap Index** هو نوع خاص من الـ **Index** بيستخدم **Bit Vectors** (تسلسل من 0 و 1) عشان يسرع الـ **Queries**، خاصةً في الـ **OLAP**.
- لكل قيمة في عمود معين، بنعمل **Bit Vector** بيوضح إذا القيمة دي موجودة في كل صف.
- **مثال**: لو عندك جدول فيه عمود "المنطقة" (القاهرة، الإسكندرية، الجيزة)، الـ **Bitmap Index** هيعمل **Bit Vector** لكل منطقة:
  - القاهرة: 10100 (يعني الصف 1 و 3 فيهم القاهرة).
  - الإسكندرية: 01010 (يعني الصف 2 و 4 فيهم الإسكندرية).
- لو عايز تعرف العملاء في القاهرة اللي نوعهم "تاجر"، بتعمل عملية **AND** بين **Bit Vector** القاهرة و **Bit Vector** تاجر.

**مثال عملي**: لو عندك جدول مبيعات، وبتدور على المبيعات في "القاهرة" لمنتج "تيشيرت"، الـ **Bitmap Index** بيخلّي الـ **Query** أسرع بكتير.

*مصدر*: [Bitmap Indexing](https://www.geeksforgeeks.org/bitmap-indexing-in-dbms/)

---

## 10. **Metadata Repository**
الـ **Metadata Repository** هو "بيانات عن البيانات"، يعني بيخزن معلومات عن هيكلية الـ **Data Warehouse**:
- **وصف الهيكلية**: زي الـ **Schema**، **Views**، **Dimensions**، و **Hierarchies**.
- **بيانات تشغيلية**: زي مصدر البيانات (**Data Lineage**) وحالة البيانات (نشطة أو مؤرشفة).
- **خوارزميات التلخيص**: زي طريقة حساب الإجماليات.
- **بيانات الأعمال**: زي تعريفات المصطلحات التجارية وملكية البيانات.

**مثال**: لو عايز تعرف إزاي بيانات المبيعات اتحولت من الـ **Operational Database** للـ **Data Warehouse**، الـ **Metadata Repository** هيديك الخطوات.

*مصدر*: [Metadata in Data Warehousing](https://www.snowflake.com/guides/what-metadata-and-why-it-important)

---

## 11. أنواع **OLAP Servers**
فيه 3 أنواع رئيسية لسيرفرات الـ **OLAP**:
1. **ROLAP (Relational OLAP)**: بيخزن البيانات في قواعد بيانات علائقية (**Relational Databases**). مناسب للبيانات الكبيرة.
   - **مثال**: بيستخدم **SQL** لتحليل البيانات.
2. **MOLAP (Multidimensional OLAP)**: بيخزن البيانات في هيكلية متعددة الأبعاد (**Data Cube**). أسرع في التحليل.
   - **مثال**: بيستخدم **Data Cube** لحساب المبيعات بسرعة.
3. **HOLAP (Hybrid OLAP)**: مزيج بين الـ **ROLAP** و **MOLAP**. بيستخدم الـ **Relational Database** للبيانات التفصيلية و **Data Cube** للتحليلات السريعة.
   - **مثال**: بيستخدم **HOLAP** لتحليل مبيعات المنتجات التفصيلية مع تلخيص سريع.

*مصدر*: [OLAP Server Types](https://www.tutorialspoint.com/dw/dw_olap.htm)

---

## 12. تصميم الـ **Data Warehouse** (Business Analysis Framework)
تصميم الـ **Data Warehouse** بيعتمد على 4 زوايا:
1. **Top-Down View**: بيركز على أهداف الشركة (مثلاً، زيادة المبيعات).
2. **Data Source View**: بيحدد مصادر البيانات (زي قواعد البيانات أو ملفات Excel).
3. **Data Warehouse View**: بيتكون من **Fact Tables** و **Dimension Tables**.
4. **Business Query View**: بيركز على إزاي المستخدمين هيتعاملوا مع البيانات (مثلاً، تقارير المبيعات).

**خطوات التصميم**:
1. اختيار العملية التجارية (زي المبيعات أو المخزون).
2. تحديد مستوى التفاصيل (**Grain**).
3. اختيار الـ **Dimensions** (زي الوقت، المكان).
4. اختيار الـ **Measures** (زي إجمالي المبيعات).

**مثال**: لو بتصمم **Data Warehouse** لشركة توصيل، هتختار عملية "التوصيل"، مستوى التفاصيل (كل طلب)، الـ **Dimensions** (الوقت، المنطقة، نوع المنتج)، والـ **Measures** (عدد الطلبات، التكلفة).

*مصدر*: [Data Warehouse Design](https://www.guru99.com/data-warehouse-architecture.html)

---

## 13. استخدامات الـ **Data Warehouse**
فيه 3 أنواع رئيسية للاستخدامات:
1. **Information Processing**: تقارير بسيطة زي الـ **Reports** والـ **Charts**.
   - **مثال**: تقرير يوضح عدد زوار موقع الشركة كل يوم.
2. **Analytical Processing**: تحليلات متعددة الأبعاد باستخدام **OLAP Operations**.
   - **مثال**: تحليل مبيعات منتج معين في مناطق مختلفة على مدار سنة.
3. **Data Mining**: اكتشاف أنماط مخفية باستخدام خوارزميات.
   - **مثال**: بنك بيستخدم **Data Mining** عشان يتوقع العملاء اللي ممكن يتأخروا في سداد القروض.

*مصدر*: [Data Warehouse Usage](https://www.simplilearn.com/data-warehouse-applications-article)

---

## 14. **OLAM (Online Analytical Mining)**
الـ **OLAM** هو دمج **Data Mining** مع **OLAP** عشان تحليل أعمق:
- **ليه؟** لأن الـ **Data Warehouse** بيوفر بيانات نظيفة ومتكاملة مناسبة للـ **Data Mining**.
- **مثال**: شركة بيع بالتجزئة بتستخدم **OLAM** عشان تكتشف العملاء اللي بيشتروا منتجات معينة مع بعض، وتعمل عروض مخصصة.

*مصدر*: [OLAM in Data Warehousing](https://www.geeksforgeeks.org/data-mining-and-warehousing/)

---

## 15. نصايح للمبتدئين في **Data Analysis**
- **اتعلم SQL**: أساسي للتعامل مع الـ **Data Warehouse**.
- **جرب BI Tools**: زي Power BI أو Tableau لعمل **Visualizations**.
- **افهم احتياجات البيزنس**: اعرف الشركة عايزة تحلل إيه (مبيعات، عملاء، مخزون).
- **ركز على تنظيف البيانات**: البيانات المنضفة هي سر التحليل الناجح.
- **تعلم OLAP Operations**: زي **Roll-up** و **Drill-down** عشان تحلل البيانات بمرونة.

**مثال عملي**: لو بتشتغل في شركة أزياء، حاول تحلل بيانات المبيعات عشان تعرف أي تصميمات بتتباع أكتر في مواسم معينة، واستخدم **Power BI** عشان تعمل **Charts** توضح النتايج.

*مصدر*: [Getting Started with Data Analysis](https://www.datacamp.com/blog/how-to-become-a-data-analyst)

---

## 16. الخلاصة
- الـ **Data Warehouse** هو مستودع بيانات بيجمع البيانات التاريخية من مصادر مختلفة للتحليل.
- بيختلف عن الـ **Operational Database** لأنه بيركز على **OLAP** وتحليلات معقدة.
- عملية **ETL** بتحضر البيانات (استخراج، تحويل، تحميل).
- تصميمات زي **Star Schema** و **Snowflake Schema** بتسهل التحليل.
- **OLAP Operations** زي **Roll-up** و **Slice** بتساعدك تستكشف البيانات من زوايا مختلفة.
- **Bitmap Index** بيسرع الـ **Queries**، و **Metadata Repository** بيوفر معلومات عن البيانات.

يا شباب، لو عايزين تبدأوا في **Data Analysis**، ابدأوا بتعلم **SQL** وفهم احتياجات الشركة. مع الوقت، هتقدروا تساعدوا الشركات تاخد قرارات ذكية بناءً على البيانات!

*مصادر إضافية*:
- [The Data Warehouse Toolkit](https://www.amazon.com/Data-Warehouse-Toolkit-Definitive-Dimensional/dp/1118530802)
- [Data Mining: Concepts and Techniques](https://www.elsevier.com/books/data-mining-concepts-and-techniques/han/978-0-12-381479-1)